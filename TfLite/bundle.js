!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r,n,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&m())}function m(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||l||s(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{constructor(e,t){this.lastTick=performance.now(),this.lastNotify=this.lastTick,this.interval=e,this.element=t,this.runningSum=0,this.runningSamples=0}tick(){const e=performance.now();this.runningSum+=e-this.lastTick,this.runningSamples++,this.lastTick=e,e-this.lastNotify>this.interval&&this.notify(e)}notify(e){const t=1e3/(this.runningSum/this.runningSamples);this.element.innerText=t.toFixed(2)+"fps",this.lastNotify=e,this.runningSamples=0,this.runningSum=0}}},function(e,t,r){"use strict";function n(e,t,r){new Uint8Array(t,r,e.byteLength).set(new Uint8Array(e))}r.d(t,"a",(function(){return n}))},function(e,t,r){(function(t){var r,n=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,o,a=void 0!==(e=e||{})?e:{};a.ready=new Promise((function(e,t){n=e,o=t})),a.expectedDataFileDownloads||(a.expectedDataFileDownloads=0),a.expectedDataFileDownloads++,function(e){if("object"==typeof window)window.encodeURIComponent(window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/");else{if("undefined"==typeof location)throw"using preloaded data can only be done on a web page or in a web worker";encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/")}"function"!=typeof a.locateFilePackage||a.locateFile||(a.locateFile=a.locateFilePackage,x("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)"));var t=a.locateFile?a.locateFile("tflite-wasm.data",""):"tflite-wasm.data",r=e.remote_package_size;e.package_uuid;var n,o,i,s,c=null,u=a.getPreloadedPackage?a.getPreloadedPackage(t,r):null;function l(){function t(e,t){if(!e)throw t+(new Error).stack}function r(e,t,r){this.start=e,this.end=t,this.audio=r}r.prototype={requests:{},open:function(e,t){this.name=t,this.requests[t]=this,a.addRunDependency("fp "+this.name)},send:function(){},onload:function(){var e=this.byteArray.subarray(this.start,this.end);this.finish(e)},finish:function(e){a.FS_createDataFile(this.name,null,e,!0,!0,!0),a.removeRunDependency("fp "+this.name),this.requests[this.name]=null}};for(var n=e.files,o=0;o<n.length;++o)new r(n[o].start,n[o].end,n[o].audio).open("GET",n[o].filename);function i(n){t(n,"Loading data file failed."),t(n instanceof ArrayBuffer,"bad input to processPackageData");var o=new Uint8Array(n);r.prototype.byteArray=o;for(var i=e.files,s=0;s<i.length;++s)r.prototype.requests[i[s].filename].onload();a.removeRunDependency("datafile_tflite-wasm.data")}a.addRunDependency("datafile_tflite-wasm.data"),a.preloadResults||(a.preloadResults={}),a.preloadResults["tflite-wasm.data"]={fromCache:!1},u?(i(u),u=null):c=i}u||(n=t,o=r,i=function(e){c?(c(e),c=null):u=e},(s=new XMLHttpRequest).open("GET",n,!0),s.responseType="arraybuffer",s.onprogress=function(e){var t=n,r=o;if(e.total&&(r=e.total),e.loaded){s.addedTotal?a.dataFileDownloads[t].loaded=e.loaded:(s.addedTotal=!0,a.dataFileDownloads||(a.dataFileDownloads={}),a.dataFileDownloads[t]={loaded:e.loaded,total:r});var i=0,c=0,u=0;for(var l in a.dataFileDownloads){var d=a.dataFileDownloads[l];i+=d.total,c+=d.loaded,u++}i=Math.ceil(i*a.expectedDataFileDownloads/u),a.setStatus&&a.setStatus("Downloading data... ("+c+"/"+i+")")}else a.dataFileDownloads||a.setStatus&&a.setStatus("Downloading data...")},s.onerror=function(e){throw new Error("NetworkError for: "+n)},s.onload=function(e){if(!(200==s.status||304==s.status||206==s.status||0==s.status&&s.response))throw new Error(s.statusText+" : "+s.responseURL);var t=s.response;i(t)},s.send(null)),a.calledRun?l():(a.preRun||(a.preRun=[]),a.preRun.push(l))}({files:[{filename:"/segm_full_v491.tflite",start:0,end:407472,audio:0}],remote_package_size:407472,package_uuid:"f4cc99c6-69d2-45a1-ba48-67775f73f967"});var i,s={};for(i in a)a.hasOwnProperty(i)&&(s[i]=a[i]);var c,u,l,d=[],f="./this.program",m=function(e,t){throw t};c="object"==typeof window,u="function"==typeof importScripts,l="object"==typeof t&&"object"==typeof t.versions&&"string"==typeof t.versions.node;var h=a.ENVIRONMENT_IS_PTHREAD||!1;h&&(T=a.buffer);var p,v,_="";function g(e){return a.locateFile?a.locateFile(e,_):_+e}(c||u)&&(u?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),r&&(_=r),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var w,y,E,k,b=a.print||console.log.bind(console),x=a.printErr||console.warn.bind(console);for(i in s)s.hasOwnProperty(i)&&(a[i]=s[i]);s=null,a.arguments&&(d=a.arguments),a.thisProgram&&(f=a.thisProgram),a.quit&&(m=a.quit),Atomics.load,Atomics.store,Atomics.compareExchange,a.wasmBinary&&(w=a.wasmBinary),a.noExitRuntime&&(y=a.noExitRuntime),"object"!=typeof WebAssembly&&ne("no native wasm support detected");var T,S,D,A,F,P,R,B=0,I=0,C=!1;function M(e,t){e||ne("Assertion failed: "+t)}function L(e){var t=a["_"+e];return M(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function j(e,t,r,n,o){var a={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);H(e,t=Bt(r),r)}return t},array:function(e){var t=Bt(e.length);return function(e,t){S.set(e,t)}(e,t),t}},i=L(e),s=[],c=0;if(n)for(var u=0;u<n.length;u++){var l=a[r[u]];l?(0===c&&(c=Pt()),s[u]=l(n[u])):s[u]=n[u]}var d=i.apply(null,s);return d=function(e){return"string"===t?N(e):"boolean"===t?Boolean(e):e}(d),0!==c&&Rt(c),d}function O(e,t,r){for(var n=t+r,o="";!(t>=n);){var a=e[t++];if(!a)return o;if(128&a){var i=63&e[t++];if(192!=(224&a)){var s=63&e[t++];if((a=224==(240&a)?(15&a)<<12|i<<6|s:(7&a)<<18|i<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|i)}else o+=String.fromCharCode(a)}return o}function N(e,t){return e?O(D,e,t):""}function W(e,t,r,n){if(!(n>0))return 0;for(var o=r,a=r+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(r>=a)break;t[r++]=s}else if(s<=2047){if(r+1>=a)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=a)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=a)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function H(e,t,r){return W(e,D,t,r)}function U(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}function z(e){var t=U(e)+1,r=Bt(t);return W(e,S,r,t),r}var G,q,X=a.INITIAL_MEMORY||33554432;if(h)E=a.wasmMemory,T=a.buffer;else if(a.wasmMemory)E=a.wasmMemory;else if(!((E=new WebAssembly.Memory({initial:X/65536,maximum:X/65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),l&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");E&&(T=E.buffer),X=T.byteLength,T=G=T,a.HEAP8=S=new Int8Array(G),a.HEAP16=A=new Int16Array(G),a.HEAP32=F=new Int32Array(G),a.HEAPU8=D=new Uint8Array(G),a.HEAPU16=new Uint16Array(G),a.HEAPU32=P=new Uint32Array(G),a.HEAPF32=new Float32Array(G),a.HEAPF64=R=new Float64Array(G);var V=[],K=[],Q=[],Y=[],$=[],J=0,Z=null,ee=null;function te(e){M(!h,"addRunDependency cannot be used in a pthread worker"),J++,a.monitorRunDependencies&&a.monitorRunDependencies(J)}function re(e){if(J--,a.monitorRunDependencies&&a.monitorRunDependencies(J),0==J&&(null!==Z&&(clearInterval(Z),Z=null),ee)){var t=ee;ee=null,t()}}function ne(e){a.onAbort&&a.onAbort(e),h&&console.error("Pthread aborting at "+(new Error).stack),x(e+=""),C=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw o(t),t}function oe(e){return t=e,r="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(r):0===t.indexOf(r);var t,r}a.preloadedImages={},a.preloadedAudios={};var ae,ie,se="tflite-wasm.wasm";function ce(){try{if(w)return new Uint8Array(w);if(v)return v(se);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}oe(se)||(se=g(se));var ue={169020:function(){throw"Canceled!"},169242:function(e,t){setTimeout((function(){jt(e,t)}),0)}};function le(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?q.get(r)():q.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(a)}}a.dynCall=function(e,t,r){return-1!=e.indexOf("j")?function(e,t,r){return r&&r.length?a["dynCall_"+e].apply(null,[t].concat(r)):a["dynCall_"+e].call(null,t)}(e,t,r):q.get(t).apply(null,r)};var de=0,fe=0,me=0;function he(e,t,r){de=e|=0,me=t|=0,fe=r|=0}a.registerPthreadPtr=he;var pe=71,ve=10,_e=28,ge=16;function we(e,t){if(e<=0||e>S.length||!0&e||t<0)return-28;if(0==t)return 0;t>=2147483647&&(t=1/0);var r=Atomics.load(F,ke.mainThreadFutex>>2),n=0;if(r==e&&Atomics.compareExchange(F,ke.mainThreadFutex>>2,r,0)==r&&(n=1,--t<=0))return 1;var o=Atomics.notify(F,e>>2,t);if(o>=0)return o+n;throw"Atomics.notify returned an unexpected value "+o}function ye(e){if(h)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";F[e+12>>2]=0;var t=ke.pthreads[e];if(t){var r=t.worker;ke.returnWorkerToPool(r)}}a._emscripten_futex_wake=we;var Ee,ke={MAIN_THREAD_ID:1,mainThreadInfo:{schedPolicy:0,schedPrio:0},unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){},initRuntime:function(){ke.mainThreadBlock=Tt(232);for(var e=0;e<58;++e)P[ke.mainThreadBlock/4+e]=0;F[ke.mainThreadBlock+12>>2]=ke.mainThreadBlock;var t=ke.mainThreadBlock+156;F[t>>2]=t;var r=Tt(512);for(e=0;e<128;++e)P[r/4+e]=0;Atomics.store(P,ke.mainThreadBlock+104>>2,r),Atomics.store(P,ke.mainThreadBlock+40>>2,ke.mainThreadBlock),Atomics.store(P,ke.mainThreadBlock+44>>2,42),ke.initShared(),he(ke.mainThreadBlock,!u,1),Lt(ke.mainThreadBlock)},initWorker:function(){ke.initShared(),n(a)},initShared:function(){ke.mainThreadFutex=Ht},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;ke.threadExitHandlers.length>0;)ke.threadExitHandlers.pop()();h&&B&&Ct()},threadExit:function(e){var t=pt();t&&(Atomics.store(P,t+4>>2,e),Atomics.store(P,t+0>>2,1),Atomics.store(P,t+60>>2,1),Atomics.store(P,t+64>>2,0),ke.runExitHandlers(),we(t+0,2147483647),he(0,0,0),B=0,h&&postMessage({cmd:"exit"}))},threadCancel:function(){ke.runExitHandlers(),Atomics.store(P,B+4>>2,-1),Atomics.store(P,B+0>>2,1),we(B+0,2147483647),B=I=0,he(0,0,0),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in ke.pthreads)(n=ke.pthreads[e])&&n.worker&&ke.returnWorkerToPool(n.worker);ke.pthreads={};for(var t=0;t<ke.unusedWorkers.length;++t)(r=ke.unusedWorkers[t]).terminate();for(ke.unusedWorkers=[],t=0;t<ke.runningWorkers.length;++t){var r,n=(r=ke.runningWorkers[t]).pthread;ke.freeThreadData(n),r.terminate()}ke.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=F[e.threadInfoStruct+104>>2];F[e.threadInfoStruct+104>>2]=0,St(t),St(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&St(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){delete ke.pthreads[e.pthread.thread],ke.unusedWorkers.push(e),ke.runningWorkers.splice(ke.runningWorkers.indexOf(e),1),ke.freeThreadData(e.pthread),e.pthread=void 0},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(r){var n=r.data,o=n.cmd;if(e.pthread&&(ke.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),n.targetThread&&n.targetThread!=pt()){var a=ke.pthreads[n.targetThread];return a?a.worker.postMessage(r.data,n.transferList):console.error('Internal error! Worker sent a message "'+o+'" to target pthread '+n.targetThread+", but that thread no longer exists!"),void(ke.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===o?Mt():"spawnThread"===o?ht(r.data):"cleanupThread"===o?ye(n.thread):"killThread"===o?function(e){if(h)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";F[e+12>>2]=0;var t=ke.pthreads[e];t.worker.terminate(),ke.freeThreadData(t),ke.runningWorkers.splice(ke.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(n.thread):"cancelThread"===o?function(e){if(h)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";ke.pthreads[e].worker.postMessage({cmd:"cancel"})}(n.thread):"loaded"===o?(e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread)):"print"===o?b("Thread "+n.threadId+": "+n.text):"printErr"===o?x("Thread "+n.threadId+": "+n.text):"alert"===o?alert("Thread "+n.threadId+": "+n.text):"exit"===o?e.pthread&&Atomics.load(P,e.pthread.thread+68>>2)&&ke.returnWorkerToPool(e):"cancelDone"===o?ke.returnWorkerToPool(e):"objectTransfer"===o?ke.receiveObjectTransfer(r.data):"setimmediate"===r.data.target?e.postMessage(r.data):x("worker sent an unknown command "+o),ke.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){x("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},e.postMessage({cmd:"load",urlOrBlob:a.mainScriptUrlOrBlob||r,wasmMemory:E,wasmModule:k})},allocateUnusedWorker:function(){var e=g("tflite-wasm.worker.js");ke.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ke.unusedWorkers.length&&(ke.allocateUnusedWorker(),ke.loadWasmModuleToWorker(ke.unusedWorkers[0])),ke.unusedWorkers.length>0?ke.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function be(){var e=function(){var e=new Error;if(!e.stack){try{throw new Error}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}();return a.extraStackTrace&&(e+="\n"+a.extraStackTrace()),e.replace(/\b_Z[\w\d_]+/g,(function(e){return e==e?e:e+" ["+e+"]"}))}function xe(e){return F[Dt()>>2]=e,e}a.establishStackSpace=function(e,t){Rt(e)},a.getNoExitRuntime=function(){return y},Ee=h?function(){return performance.now()-a.__performance_now_clock_drift}:function(){return performance.now()};var Te=0,Se=4,De=8,Ae=12,Fe=13,Pe=16;function Re(e){this.excPtr=e,this.ptr=e-Pe,this.set_type=function(e){F[this.ptr+De>>2]=e},this.get_type=function(){return F[this.ptr+De>>2]},this.set_destructor=function(e){F[this.ptr+Te>>2]=e},this.get_destructor=function(){return F[this.ptr+Te>>2]},this.set_refcount=function(e){F[this.ptr+Se>>2]=e},this.set_caught=function(e){e=e?1:0,S[this.ptr+Ae>>0]=e},this.get_caught=function(){return 0!=S[this.ptr+Ae>>0]},this.set_rethrown=function(e){e=e?1:0,S[this.ptr+Fe>>0]=e},this.get_rethrown=function(){return 0!=S[this.ptr+Fe>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Atomics.add(F,this.ptr+Se>>2,1)},this.release_ref=function(){return 1===Atomics.sub(F,this.ptr+Se>>2,1)}}function Be(){return Be.uncaught_exceptions>0}var Ie={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=Ie.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Ie.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=Ie.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Ie.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ie.normalize(e.join("/"))},join2:function(e,t){return Ie.normalize(e+"/"+t)}},Ce={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:Oe.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return(t?"/":"")+(e=Ie.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=Ce.resolve(e).substr(1),t=Ce.resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),a=Math.min(n.length,o.length),i=a,s=0;s<a;s++)if(n[s]!==o[s]){i=s;break}var c=[];for(s=i;s<n.length;s++)c.push("..");return(c=c.concat(o.slice(i))).join("/")}},Me={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Me.ttys[e]={input:[],output:[],ops:t},Oe.registerDevice(e,Me.stream_ops)},stream_ops:{open:function(e){var t=Me.ttys[e.node.rdev];if(!t)throw new Oe.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.get_char)throw new Oe.ErrnoError(60);for(var a=0,i=0;i<n;i++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new Oe.ErrnoError(29)}if(void 0===s&&0===a)throw new Oe.ErrnoError(6);if(null==s)break;a++,t[r+i]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.put_char)throw new Oe.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,t[r+a])}catch(e){throw new Oe.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Et(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(b(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(b(O(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(x(O(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(x(O(e.output,0)),e.output=[])}}};function Le(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),r=Tt(t);e<t;)S[r+e++]=0;return r}var je={ops_table:null,mount:function(e){return je.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(Oe.isBlkdev(r)||Oe.isFIFO(r))throw new Oe.ErrnoError(63);je.ops_table||(je.ops_table={dir:{node:{getattr:je.node_ops.getattr,setattr:je.node_ops.setattr,lookup:je.node_ops.lookup,mknod:je.node_ops.mknod,rename:je.node_ops.rename,unlink:je.node_ops.unlink,rmdir:je.node_ops.rmdir,readdir:je.node_ops.readdir,symlink:je.node_ops.symlink},stream:{llseek:je.stream_ops.llseek}},file:{node:{getattr:je.node_ops.getattr,setattr:je.node_ops.setattr},stream:{llseek:je.stream_ops.llseek,read:je.stream_ops.read,write:je.stream_ops.write,allocate:je.stream_ops.allocate,mmap:je.stream_ops.mmap,msync:je.stream_ops.msync}},link:{node:{getattr:je.node_ops.getattr,setattr:je.node_ops.setattr,readlink:je.node_ops.readlink},stream:{}},chrdev:{node:{getattr:je.node_ops.getattr,setattr:je.node_ops.setattr},stream:Oe.chrdev_stream_ops}});var o=Oe.createNode(e,t,r,n);return Oe.isDir(o.mode)?(o.node_ops=je.ops_table.dir.node,o.stream_ops=je.ops_table.dir.stream,o.contents={}):Oe.isFile(o.mode)?(o.node_ops=je.ops_table.file.node,o.stream_ops=je.ops_table.file.stream,o.usedBytes=0,o.contents=null):Oe.isLink(o.mode)?(o.node_ops=je.ops_table.link.node,o.stream_ops=je.ops_table.link.stream):Oe.isChrdev(o.mode)&&(o.node_ops=je.ops_table.chrdev.node,o.stream_ops=je.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Oe.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Oe.isDir(e.mode)?t.size=4096:Oe.isFile(e.mode)?t.size=e.usedBytes:Oe.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&je.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Oe.genericErrors[44]},mknod:function(e,t,r,n){return je.createNode(e,t,r,n)},rename:function(e,t,r){if(Oe.isDir(e.mode)){var n;try{n=Oe.lookupNode(t,r)}catch(e){}if(n)for(var o in n.contents)throw new Oe.ErrnoError(55)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=Oe.lookupNode(e,t);for(var n in r.contents)throw new Oe.ErrnoError(55);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=je.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!Oe.isLink(e.mode))throw new Oe.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var i=Math.min(e.node.usedBytes-o,n);if(i>8&&a.subarray)t.set(a.subarray(o,o+i),r);else for(var s=0;s<i;s++)t[r+s]=a[o+s];return i},write:function(e,t,r,n,o,a){if(!n)return 0;var i=e.node;if(i.timestamp=Date.now(),t.subarray&&(!i.contents||i.contents.subarray)){if(a)return i.contents=t.subarray(r,r+n),i.usedBytes=n,n;if(0===i.usedBytes&&0===o)return i.contents=t.slice(r,r+n),i.usedBytes=n,n;if(o+n<=i.usedBytes)return i.contents.set(t.subarray(r,r+n),o),n}if(je.expandFileStorage(i,o+n),i.contents.subarray&&t.subarray)i.contents.set(t.subarray(r,r+n),o);else for(var s=0;s<n;s++)i.contents[o+s]=t[r+s];return i.usedBytes=Math.max(i.usedBytes,o+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&Oe.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new Oe.ErrnoError(28);return n},allocate:function(e,t,r){je.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,a){if(M(0===t),!Oe.isFile(e.node.mode))throw new Oe.ErrnoError(43);var i,s,c=e.node.contents;if(2&a||c.buffer!==T){if((n>0||n+r<c.length)&&(c=c.subarray?c.subarray(n,n+r):Array.prototype.slice.call(c,n,n+r)),s=!0,!(i=Le(r)))throw new Oe.ErrnoError(48);S.set(c,i)}else s=!1,i=c.byteOffset;return{ptr:i,allocated:s}},msync:function(e,t,r,n,o){if(!Oe.isFile(e.node.mode))throw new Oe.ErrnoError(43);return 2&o||je.stream_ops.write(e,t,0,n,r,!1),0}}},Oe={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof Oe.ErrnoError))throw e+" : "+be();return xe(e.errno)},lookupPath:function(e,t){if(t=t||{},!(e=Ce.resolve(Oe.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(t.recurse_count>8)throw new Oe.ErrnoError(32);for(var o=Ie.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),a=Oe.root,i="/",s=0;s<o.length;s++){var c=s===o.length-1;if(c&&t.parent)break;if(a=Oe.lookupNode(a,o[s]),i=Ie.join2(i,o[s]),Oe.isMountpoint(a)&&(!c||c&&t.follow_mount)&&(a=a.mounted.root),!c||t.follow)for(var u=0;Oe.isLink(a.mode);){var l=Oe.readlink(i);if(i=Ce.resolve(Ie.dirname(i),l),a=Oe.lookupPath(i,{recurse_count:t.recurse_count}).node,u++>40)throw new Oe.ErrnoError(32)}}return{path:i,node:a}},getPath:function(e){for(var t;;){if(Oe.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%Oe.nameTable.length},hashAddNode:function(e){var t=Oe.hashName(e.parent.id,e.name);e.name_next=Oe.nameTable[t],Oe.nameTable[t]=e},hashRemoveNode:function(e){var t=Oe.hashName(e.parent.id,e.name);if(Oe.nameTable[t]===e)Oe.nameTable[t]=e.name_next;else for(var r=Oe.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=Oe.mayLookup(e);if(r)throw new Oe.ErrnoError(r,e);for(var n=Oe.hashName(e.id,t),o=Oe.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===t)return o}return Oe.lookup(e,t)},createNode:function(e,t,r,n){var o=new Oe.FSNode(e,t,r,n);return Oe.hashAddNode(o),o},destroyNode:function(e){Oe.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=Oe.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return Oe.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){var t=Oe.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return Oe.lookupNode(e,t),20}catch(e){}return Oe.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n;try{n=Oe.lookupNode(e,t)}catch(e){return e.errno}var o=Oe.nodePermissions(e,"wx");if(o)return o;if(r){if(!Oe.isDir(n.mode))return 54;if(Oe.isRoot(n)||Oe.getPath(n)===Oe.cwd())return 10}else if(Oe.isDir(n.mode))return 31;return 0},mayOpen:function(e,t){return e?Oe.isLink(e.mode)?32:Oe.isDir(e.mode)&&("r"!==Oe.flagsToPermissionString(t)||512&t)?31:Oe.nodePermissions(e,Oe.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||Oe.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!Oe.streams[r])return r;throw new Oe.ErrnoError(33)},getStream:function(e){return Oe.streams[e]},createStream:function(e,t,r){Oe.FSStream||(Oe.FSStream=function(){},Oe.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var n=new Oe.FSStream;for(var o in e)n[o]=e[o];e=n;var a=Oe.nextfd(t,r);return e.fd=a,Oe.streams[a]=e,e},closeStream:function(e){Oe.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=Oe.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new Oe.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){Oe.devices[e]={stream_ops:t}},getDevice:function(e){return Oe.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),Oe.syncFSRequests++,Oe.syncFSRequests>1&&x("warning: "+Oe.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=Oe.getMounts(Oe.root.mount),n=0;function o(e){return Oe.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,o(e));++n>=r.length&&o(null)}r.forEach((function(t){if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)}))},mount:function(e,t,r){var n,o="/"===r,a=!r;if(o&&Oe.root)throw new Oe.ErrnoError(10);if(!o&&!a){var i=Oe.lookupPath(r,{follow_mount:!1});if(r=i.path,n=i.node,Oe.isMountpoint(n))throw new Oe.ErrnoError(10);if(!Oe.isDir(n.mode))throw new Oe.ErrnoError(54)}var s={type:e,opts:t,mountpoint:r,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,o?Oe.root=c:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),c},unmount:function(e){var t=Oe.lookupPath(e,{follow_mount:!1});if(!Oe.isMountpoint(t.node))throw new Oe.ErrnoError(28);var r=t.node,n=r.mounted,o=Oe.getMounts(n);Object.keys(Oe.nameTable).forEach((function(e){for(var t=Oe.nameTable[e];t;){var r=t.name_next;-1!==o.indexOf(t.mount)&&Oe.destroyNode(t),t=r}})),r.mounted=null;var a=r.mount.mounts.indexOf(n);r.mount.mounts.splice(a,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=Oe.lookupPath(e,{parent:!0}).node,o=Ie.basename(e);if(!o||"."===o||".."===o)throw new Oe.ErrnoError(28);var a=Oe.mayCreate(n,o);if(a)throw new Oe.ErrnoError(a);if(!n.node_ops.mknod)throw new Oe.ErrnoError(63);return n.node_ops.mknod(n,o,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,Oe.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,Oe.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{Oe.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,Oe.mknod(e,t,r)},symlink:function(e,t){if(!Ce.resolve(e))throw new Oe.ErrnoError(44);var r=Oe.lookupPath(t,{parent:!0}).node;if(!r)throw new Oe.ErrnoError(44);var n=Ie.basename(t),o=Oe.mayCreate(r,n);if(o)throw new Oe.ErrnoError(o);if(!r.node_ops.symlink)throw new Oe.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename:function(e,t){var r,n,o=Ie.dirname(e),a=Ie.dirname(t),i=Ie.basename(e),s=Ie.basename(t);if(r=Oe.lookupPath(e,{parent:!0}).node,n=Oe.lookupPath(t,{parent:!0}).node,!r||!n)throw new Oe.ErrnoError(44);if(r.mount!==n.mount)throw new Oe.ErrnoError(75);var c,u=Oe.lookupNode(r,i),l=Ce.relative(e,a);if("."!==l.charAt(0))throw new Oe.ErrnoError(28);if("."!==(l=Ce.relative(t,o)).charAt(0))throw new Oe.ErrnoError(55);try{c=Oe.lookupNode(n,s)}catch(e){}if(u!==c){var d=Oe.isDir(u.mode),f=Oe.mayDelete(r,i,d);if(f)throw new Oe.ErrnoError(f);if(f=c?Oe.mayDelete(n,s,d):Oe.mayCreate(n,s))throw new Oe.ErrnoError(f);if(!r.node_ops.rename)throw new Oe.ErrnoError(63);if(Oe.isMountpoint(u)||c&&Oe.isMountpoint(c))throw new Oe.ErrnoError(10);if(n!==r&&(f=Oe.nodePermissions(r,"w")))throw new Oe.ErrnoError(f);try{Oe.trackingDelegate.willMovePath&&Oe.trackingDelegate.willMovePath(e,t)}catch(r){x("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}Oe.hashRemoveNode(u);try{r.node_ops.rename(u,n,s)}catch(e){throw e}finally{Oe.hashAddNode(u)}try{Oe.trackingDelegate.onMovePath&&Oe.trackingDelegate.onMovePath(e,t)}catch(r){x("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=Oe.lookupPath(e,{parent:!0}).node,r=Ie.basename(e),n=Oe.lookupNode(t,r),o=Oe.mayDelete(t,r,!0);if(o)throw new Oe.ErrnoError(o);if(!t.node_ops.rmdir)throw new Oe.ErrnoError(63);if(Oe.isMountpoint(n))throw new Oe.ErrnoError(10);try{Oe.trackingDelegate.willDeletePath&&Oe.trackingDelegate.willDeletePath(e)}catch(t){x("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),Oe.destroyNode(n);try{Oe.trackingDelegate.onDeletePath&&Oe.trackingDelegate.onDeletePath(e)}catch(t){x("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=Oe.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Oe.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=Oe.lookupPath(e,{parent:!0}).node,r=Ie.basename(e),n=Oe.lookupNode(t,r),o=Oe.mayDelete(t,r,!1);if(o)throw new Oe.ErrnoError(o);if(!t.node_ops.unlink)throw new Oe.ErrnoError(63);if(Oe.isMountpoint(n))throw new Oe.ErrnoError(10);try{Oe.trackingDelegate.willDeletePath&&Oe.trackingDelegate.willDeletePath(e)}catch(t){x("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),Oe.destroyNode(n);try{Oe.trackingDelegate.onDeletePath&&Oe.trackingDelegate.onDeletePath(e)}catch(t){x("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=Oe.lookupPath(e).node;if(!t)throw new Oe.ErrnoError(44);if(!t.node_ops.readlink)throw new Oe.ErrnoError(28);return Ce.resolve(Oe.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=Oe.lookupPath(e,{follow:!t}).node;if(!r)throw new Oe.ErrnoError(44);if(!r.node_ops.getattr)throw new Oe.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(e){return Oe.stat(e,!0)},chmod:function(e,t,r){var n;if(!(n="string"==typeof e?Oe.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Oe.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){Oe.chmod(e,t,!0)},fchmod:function(e,t){var r=Oe.getStream(e);if(!r)throw new Oe.ErrnoError(8);Oe.chmod(r.node,t)},chown:function(e,t,r,n){var o;if(!(o="string"==typeof e?Oe.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Oe.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,r){Oe.chown(e,t,r,!0)},fchown:function(e,t,r){var n=Oe.getStream(e);if(!n)throw new Oe.ErrnoError(8);Oe.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new Oe.ErrnoError(28);var r;if(!(r="string"==typeof e?Oe.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Oe.ErrnoError(63);if(Oe.isDir(r.mode))throw new Oe.ErrnoError(31);if(!Oe.isFile(r.mode))throw new Oe.ErrnoError(28);var n=Oe.nodePermissions(r,"w");if(n)throw new Oe.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=Oe.getStream(e);if(!r)throw new Oe.ErrnoError(8);if(0==(2097155&r.flags))throw new Oe.ErrnoError(28);Oe.truncate(r.node,t)},utime:function(e,t,r){var n=Oe.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,o){if(""===e)throw new Oe.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?Oe.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)i=e;else{e=Ie.normalize(e);try{i=Oe.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(i){if(128&t)throw new Oe.ErrnoError(20)}else i=Oe.mknod(e,r,0),s=!0;if(!i)throw new Oe.ErrnoError(44);if(Oe.isChrdev(i.mode)&&(t&=-513),65536&t&&!Oe.isDir(i.mode))throw new Oe.ErrnoError(54);if(!s){var c=Oe.mayOpen(i,t);if(c)throw new Oe.ErrnoError(c)}512&t&&Oe.truncate(i,0),t&=-131713;var u=Oe.createStream({node:i,path:Oe.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,o);u.stream_ops.open&&u.stream_ops.open(u),!a.logReadFiles||1&t||(Oe.readFiles||(Oe.readFiles={}),e in Oe.readFiles||(Oe.readFiles[e]=1,x("FS.trackingDelegate error on read file: "+e)));try{if(Oe.trackingDelegate.onOpenFile){var l=0;1!=(2097155&t)&&(l|=Oe.tracking.openFlags.READ),0!=(2097155&t)&&(l|=Oe.tracking.openFlags.WRITE),Oe.trackingDelegate.onOpenFile(e,l)}}catch(t){x("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return u},close:function(e){if(Oe.isClosed(e))throw new Oe.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Oe.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(Oe.isClosed(e))throw new Oe.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Oe.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new Oe.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,o){if(n<0||o<0)throw new Oe.ErrnoError(28);if(Oe.isClosed(e))throw new Oe.ErrnoError(8);if(1==(2097155&e.flags))throw new Oe.ErrnoError(8);if(Oe.isDir(e.node.mode))throw new Oe.ErrnoError(31);if(!e.stream_ops.read)throw new Oe.ErrnoError(28);var a=void 0!==o;if(a){if(!e.seekable)throw new Oe.ErrnoError(70)}else o=e.position;var i=e.stream_ops.read(e,t,r,n,o);return a||(e.position+=i),i},write:function(e,t,r,n,o,a){if(n<0||o<0)throw new Oe.ErrnoError(28);if(Oe.isClosed(e))throw new Oe.ErrnoError(8);if(0==(2097155&e.flags))throw new Oe.ErrnoError(8);if(Oe.isDir(e.node.mode))throw new Oe.ErrnoError(31);if(!e.stream_ops.write)throw new Oe.ErrnoError(28);e.seekable&&1024&e.flags&&Oe.llseek(e,0,2);var i=void 0!==o;if(i){if(!e.seekable)throw new Oe.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,r,n,o,a);i||(e.position+=s);try{e.path&&Oe.trackingDelegate.onWriteToFile&&Oe.trackingDelegate.onWriteToFile(e.path)}catch(t){x("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(Oe.isClosed(e))throw new Oe.ErrnoError(8);if(t<0||r<=0)throw new Oe.ErrnoError(28);if(0==(2097155&e.flags))throw new Oe.ErrnoError(8);if(!Oe.isFile(e.node.mode)&&!Oe.isDir(e.node.mode))throw new Oe.ErrnoError(43);if(!e.stream_ops.allocate)throw new Oe.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,o,a){if(0!=(2&o)&&0==(2&a)&&2!=(2097155&e.flags))throw new Oe.ErrnoError(2);if(1==(2097155&e.flags))throw new Oe.ErrnoError(2);if(!e.stream_ops.mmap)throw new Oe.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,o,a)},msync:function(e,t,r,n,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,o):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new Oe.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=Oe.open(e,t.flags),o=Oe.stat(e).size,a=new Uint8Array(o);return Oe.read(n,a,0,o,0),"utf8"===t.encoding?r=O(a,0):"binary"===t.encoding&&(r=a),Oe.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||"w";var n=Oe.open(e,r.flags,r.mode);if("string"==typeof t){var o=new Uint8Array(U(t)+1),a=W(t,o,0,o.length);Oe.write(n,o,0,a,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Oe.write(n,t,0,t.byteLength,void 0,r.canOwn)}Oe.close(n)},cwd:function(){return Oe.currentPath},chdir:function(e){var t=Oe.lookupPath(e,{follow:!0});if(null===t.node)throw new Oe.ErrnoError(44);if(!Oe.isDir(t.node.mode))throw new Oe.ErrnoError(54);var r=Oe.nodePermissions(t.node,"x");if(r)throw new Oe.ErrnoError(r);Oe.currentPath=t.path},createDefaultDirectories:function(){Oe.mkdir("/tmp"),Oe.mkdir("/home"),Oe.mkdir("/home/web_user")},createDefaultDevices:function(){Oe.mkdir("/dev"),Oe.registerDevice(Oe.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,o){return n}}),Oe.mkdev("/dev/null",Oe.makedev(1,3)),Me.register(Oe.makedev(5,0),Me.default_tty_ops),Me.register(Oe.makedev(6,0),Me.default_tty1_ops),Oe.mkdev("/dev/tty",Oe.makedev(5,0)),Oe.mkdev("/dev/tty1",Oe.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){ne("randomDevice")}}();Oe.createDevice("/dev","random",e),Oe.createDevice("/dev","urandom",e),Oe.mkdir("/dev/shm"),Oe.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Oe.mkdir("/proc"),Oe.mkdir("/proc/self"),Oe.mkdir("/proc/self/fd"),Oe.mount({mount:function(){var e=Oe.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=Oe.getStream(r);if(!n)throw new Oe.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},e}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?Oe.createDevice("/dev","stdin",a.stdin):Oe.symlink("/dev/tty","/dev/stdin"),a.stdout?Oe.createDevice("/dev","stdout",null,a.stdout):Oe.symlink("/dev/tty","/dev/stdout"),a.stderr?Oe.createDevice("/dev","stderr",null,a.stderr):Oe.symlink("/dev/tty1","/dev/stderr"),Oe.open("/dev/stdin","r"),Oe.open("/dev/stdout","w"),Oe.open("/dev/stderr","w")},ensureErrnoError:function(){Oe.ErrnoError||(Oe.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Oe.ErrnoError.prototype=new Error,Oe.ErrnoError.prototype.constructor=Oe.ErrnoError,[44].forEach((function(e){Oe.genericErrors[e]=new Oe.ErrnoError(e),Oe.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){Oe.ensureErrnoError(),Oe.nameTable=new Array(4096),Oe.mount(je,{},"/"),Oe.createDefaultDirectories(),Oe.createDefaultDevices(),Oe.createSpecialDirectories(),Oe.filesystems={MEMFS:je}},init:function(e,t,r){Oe.init.initialized=!0,Oe.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=r||a.stderr,Oe.createStandardStreams()},quit:function(){Oe.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<Oe.streams.length;t++){var r=Oe.streams[t];r&&Oe.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:function(e,t){var r=Oe.analyzePath(e,t);return r.exists?r.object:(xe(r.error),null)},analyzePath:function(e,t){try{e=(n=Oe.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=Oe.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Ie.basename(e),n=Oe.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath:function(e,t,r,n){e="string"==typeof e?e:Oe.getPath(e);for(var o=t.split("/").reverse();o.length;){var a=o.pop();if(a){var i=Ie.join2(e,a);try{Oe.mkdir(i)}catch(e){}e=i}}return i},createFile:function(e,t,r,n,o){var a=Ie.join2("string"==typeof e?e:Oe.getPath(e),t),i=Oe.getMode(n,o);return Oe.create(a,i)},createDataFile:function(e,t,r,n,o,a){var i=t?Ie.join2("string"==typeof e?e:Oe.getPath(e),t):e,s=Oe.getMode(n,o),c=Oe.create(i,s);if(r){if("string"==typeof r){for(var u=new Array(r.length),l=0,d=r.length;l<d;++l)u[l]=r.charCodeAt(l);r=u}Oe.chmod(c,146|s);var f=Oe.open(c,"w");Oe.write(f,r,0,r.length,0,a),Oe.close(f),Oe.chmod(c,s)}return c},createDevice:function(e,t,r,n){var o=Ie.join2("string"==typeof e?e:Oe.getPath(e),t),a=Oe.getMode(!!r,!!n);Oe.createDevice.major||(Oe.createDevice.major=64);var i=Oe.makedev(Oe.createDevice.major++,0);return Oe.registerDevice(i,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,o,a){for(var i=0,s=0;s<o;s++){var c;try{c=r()}catch(e){throw new Oe.ErrnoError(29)}if(void 0===c&&0===i)throw new Oe.ErrnoError(6);if(null==c)break;i++,t[n+s]=c}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,o,a){for(var i=0;i<o;i++)try{n(t[r+i])}catch(e){throw new Oe.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),i}}),Oe.mkdev(o,a,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!p)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Et(p(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||xe(29),t},createLazyFile:function(e,t,r,n,o){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,a=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,i=1048576;o||(i=n);var s=this;s.setDataGetter((function(e){var t=e*i,o=(e+1)*i-1;if(o=Math.min(o,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",r,!1),n!==i&&o.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+r+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):Et(o.responseText||"",!0)}(t,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!a&&n||(i=n=1,n=this.getter(0).length,i=n,b("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=i,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i=new a;Object.defineProperties(i,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:i}}else s={isDevice:!1,url:r};var c=Oe.createFile(e,t,s,n,o);s.contents?c.contents=s.contents:s.url&&(c.contents=null,c.url=s.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(c.stream_ops).forEach((function(e){var t=c.stream_ops[e];l[e]=function(){if(!Oe.forceLoadFile(c))throw new Oe.ErrnoError(29);return t.apply(null,arguments)}})),l.read=function(e,t,r,n,o){if(!Oe.forceLoadFile(c))throw new Oe.ErrnoError(29);var a=e.node.contents;if(o>=a.length)return 0;var i=Math.min(a.length-o,n);if(a.slice)for(var s=0;s<i;s++)t[r+s]=a[o+s];else for(s=0;s<i;s++)t[r+s]=a.get(o+s);return i},c.stream_ops=l,c},createPreloadedFile:function(e,t,r,n,o,i,s,c,u,l){Browser.init();var d=t?Ce.resolve(Ie.join2(e,t)):e;function f(r){function f(r){l&&l(),c||Oe.createDataFile(e,t,r,n,o,u),i&&i(),re()}var m=!1;a.preloadPlugins.forEach((function(e){m||e.canHandle(d)&&(e.handle(r,d,f,(function(){s&&s(),re()})),m=!0)})),m||f(r)}te(),"string"==typeof r?Browser.asyncLoad(r,(function(e){f(e)}),s):f(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=Oe.indexedDB();try{var o=n.open(Oe.DB_NAME(),Oe.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=function(){b("creating db"),o.result.createObjectStore(Oe.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([Oe.DB_STORE_NAME],"readwrite"),a=n.objectStore(Oe.DB_STORE_NAME),i=0,s=0,c=e.length;function u(){0==s?t():r()}e.forEach((function(e){var t=a.put(Oe.analyzePath(e).object.contents,e);t.onsuccess=function(){++i+s==c&&u()},t.onerror=function(){s++,i+s==c&&u()}})),n.onerror=r},o.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=Oe.indexedDB();try{var o=n.open(Oe.DB_NAME(),Oe.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=r,o.onsuccess=function(){var n=o.result;try{var a=n.transaction([Oe.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var i=a.objectStore(Oe.DB_STORE_NAME),s=0,c=0,u=e.length;function l(){0==c?t():r()}e.forEach((function(e){var t=i.get(e);t.onsuccess=function(){Oe.analyzePath(e).exists&&Oe.unlink(e),Oe.createDataFile(Ie.dirname(e),Ie.basename(e),t.result,!0,!0,!0),++s+c==u&&l()},t.onerror=function(){c++,s+c==u&&l()}})),a.onerror=r},o.onerror=r}},Ne={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=Oe.cwd();else{var n=Oe.getStream(e);if(!n)throw new Oe.ErrnoError(8);r=n.path}t=Ie.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&Ie.normalize(t)!==Ie.normalize(Oe.getPath(e.node)))return-54;throw e}return F[r>>2]=n.dev,F[r+4>>2]=0,F[r+8>>2]=n.ino,F[r+12>>2]=n.mode,F[r+16>>2]=n.nlink,F[r+20>>2]=n.uid,F[r+24>>2]=n.gid,F[r+28>>2]=n.rdev,F[r+32>>2]=0,ie=[n.size>>>0,(ae=n.size,+Math.abs(ae)>=1?ae>0?(0|Math.min(+Math.floor(ae/4294967296),4294967295))>>>0:~~+Math.ceil((ae-+(~~ae>>>0))/4294967296)>>>0:0)],F[r+40>>2]=ie[0],F[r+44>>2]=ie[1],F[r+48>>2]=4096,F[r+52>>2]=n.blocks,F[r+56>>2]=n.atime.getTime()/1e3|0,F[r+60>>2]=0,F[r+64>>2]=n.mtime.getTime()/1e3|0,F[r+68>>2]=0,F[r+72>>2]=n.ctime.getTime()/1e3|0,F[r+76>>2]=0,ie=[n.ino>>>0,(ae=n.ino,+Math.abs(ae)>=1?ae>0?(0|Math.min(+Math.floor(ae/4294967296),4294967295))>>>0:~~+Math.ceil((ae-+(~~ae>>>0))/4294967296)>>>0:0)],F[r+80>>2]=ie[0],F[r+84>>2]=ie[1],0},doMsync:function(e,t,r,n,o){var a=D.slice(e,e+r);Oe.msync(t,a,o,r,n)},doMkdir:function(e,t){return"/"===(e=Ie.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),Oe.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return Oe.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var n=Oe.readlink(e),o=Math.min(r,U(n)),a=S[t+o];return H(n,t,r+1),S[t+o]=a,o},doAccess:function(e,t){if(-8&t)return-28;var r;if(!(r=Oe.lookupPath(e,{follow:!0}).node))return-44;var n="";return 4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&Oe.nodePermissions(r,n)?-2:0},doDup:function(e,t,r){var n=Oe.getStream(r);return n&&Oe.close(n),Oe.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=F[t+8*a>>2],s=F[t+(8*a+4)>>2],c=Oe.read(e,S,i,s,n);if(c<0)return-1;if(o+=c,c<s)break}return o},doWritev:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=F[t+8*a>>2],s=F[t+(8*a+4)>>2],c=Oe.write(e,S,i,s,n);if(c<0)return-1;o+=c}return o},varargs:void 0,get:function(){return Ne.varargs+=4,F[Ne.varargs-4>>2]},getStr:function(e){return N(e)},getStreamFromFD:function(e){var t=Oe.getStream(e);if(!t)throw new Oe.ErrnoError(8);return t},get64:function(e,t){return e}};function We(e,t,r){if(h)return Qe(2,1,e,t,r);Ne.varargs=r;try{var n=Ne.getStreamFromFD(e);switch(t){case 0:return(o=Ne.get())<0?-28:Oe.open(n.path,n.flags,0,o).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:var o=Ne.get();return n.flags|=o,0;case 12:return o=Ne.get(),A[o+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return xe(28),-1;default:return-28}}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function He(e,t){if(h)return Qe(3,1,e,t);try{var r=Ne.getStreamFromFD(e);return Ne.doStat(Oe.stat,r.path,t)}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function Ue(e,t,r){if(h)return Qe(4,1,e,t,r);Ne.varargs=r;try{var n=Ne.getStreamFromFD(e);switch(t){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var o=Ne.get();return F[o>>2]=0,0;case 21520:return n.tty?-28:-59;case 21531:return o=Ne.get(),Oe.ioctl(n,t,o);case 21523:case 21524:return n.tty?0:-59;default:ne("bad ioctl syscall "+t)}}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function ze(e,t,r,n,o,a){if(h)return Qe(5,1,e,t,r,n,o,a);try{return function(e,t,r,n,o,a){var i;a<<=12;var s=!1;if(0!=(16&n)&&e%16384!=0)return-28;if(0!=(32&n)){if(!(i=It(16384,t)))return-48;Ft(i,0,t),s=!0}else{var c=Oe.getStream(o);if(!c)return-8;var u=Oe.mmap(c,e,t,a,r,n);i=u.ptr,s=u.allocated}return Ne.mappings[i]={malloc:i,len:t,allocated:s,fd:o,prot:r,flags:n,offset:a},i}(e,t,r,n,o,a)}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function Ge(e,t){if(h)return Qe(6,1,e,t);try{return function(e,t){if(-1==(0|e)||0===t)return-28;var r=Ne.mappings[e];if(!r)return 0;if(t===r.len){var n=Oe.getStream(r.fd);2&r.prot&&Ne.doMsync(e,n,t,r.flags,r.offset),Oe.munmap(n),Ne.mappings[e]=null,r.allocated&&St(r.malloc)}return 0}(e,t)}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function qe(e,t,r){if(h)return Qe(7,1,e,t,r);Ne.varargs=r;try{var n=Ne.getStr(e),o=Ne.get();return Oe.open(n,t,o).fd}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function Xe(e,t){if(h)return Qe(8,1,e,t);try{return e=Ne.getStr(e),Ne.doStat(Oe.stat,e,t)}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),-e.errno}}function Ve(){u||function e(t){e.shown||(e.shown={}),e.shown[t]||(e.shown[t]=1,x(t))}("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Ke(e,t,r){if(e<=0||e>S.length||!0&e)return-28;if(c){if(Atomics.load(F,e>>2)!=t)return-6;var n=performance.now(),o=n+r;for(Atomics.exchange(F,ke.mainThreadFutex>>2,e);;){if((n=performance.now())>o)return Atomics.exchange(F,ke.mainThreadFutex>>2,0),-73;if(0==Atomics.exchange(F,ke.mainThreadFutex>>2,0))break;if(Mt(),Atomics.load(F,e>>2)!=t)return-6;Atomics.exchange(F,ke.mainThreadFutex>>2,e)}return 0}var a=Atomics.wait(F,e>>2,t,r);if("timed-out"===a)return-73;if("not-equal"===a)return-6;if("ok"===a)return 0;throw"Atomics.wait returned an unexpected value "+a}function Qe(e,t){for(var r=arguments.length-2,n=Pt(),o=Bt(8*r),a=o>>3,i=0;i<r;i++)R[a+i]=arguments[2+i];var s=Nt(e,r,o,t);return Rt(n),s}var Ye=[],$e=[],Je={inEventHandler:0,removeAllEventListeners:function(){for(var e=Je.eventHandlers.length-1;e>=0;--e)Je._removeHandler(e);Je.eventHandlers=[],Je.deferredCalls=[]},registerRemoveEventListeners:function(){Je.removeEventListenersRegistered||(Y.push(Je.removeAllEventListeners),Je.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,r){function n(e,t){if(e.length!=t.length)return!1;for(var r in e)if(e[r]!=t[r])return!1;return!0}for(var o in Je.deferredCalls){var a=Je.deferredCalls[o];if(a.targetFunction==e&&n(a.argsList,r))return}Je.deferredCalls.push({targetFunction:e,precedence:t,argsList:r}),Je.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Je.deferredCalls.length;++t)Je.deferredCalls[t].targetFunction==e&&(Je.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Je.inEventHandler&&Je.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Je.canPerformEventHandlerRequests())for(var e=0;e<Je.deferredCalls.length;++e){var t=Je.deferredCalls[e];Je.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var r=0;r<Je.eventHandlers.length;++r)Je.eventHandlers[r].target!=e||t&&t!=Je.eventHandlers[r].eventTypeString||Je._removeHandler(r--)},_removeHandler:function(e){var t=Je.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Je.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Je.inEventHandler,Je.currentEventHandler=e,Je.runDeferredCalls(),e.handlerFunc(t),Je.runDeferredCalls(),--Je.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Je.eventHandlers.push(e),Je.registerRemoveEventListeners();else for(var r=0;r<Je.eventHandlers.length;++r)Je.eventHandlers[r].target==e.target&&Je.eventHandlers[r].eventTypeString==e.eventTypeString&&Je._removeHandler(r--)},queueEventHandlerOnThread_iiii:function(e,t,r,n,o){var a=Pt(),i=Bt(12);F[i>>2]=r,F[i+4>>2]=n,F[i+8>>2]=o,Wt(0,e,637534208,t,n,i),Rt(a)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ke.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Ze(e,t,r,n){var o,a,i,s=Pt(),c=Bt(12),u=0;t&&(a=U(o=t)+1,i=Tt(a),H(o,i,a),u=i),F[c>>2]=u,F[c+4>>2]=r,F[c+8>>2]=n,Wt(0,e,657457152,0,u,c),Rt(s)}var et=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function tt(e){var t;return e=(t=e)>2?N(t):t,et[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function rt(e){return tt(e)}function nt(e,t,r){var n=rt(e);if(!n)return-4;if(n.canvasSharedPtr&&(F[n.canvasSharedPtr>>2]=t,F[n.canvasSharedPtr+4>>2]=r),!n.offscreenCanvas&&n.controlTransferredOffscreen)return n.canvasSharedPtr?(function(e,t,r,n){Ze(e,t=t?N(t):"",r,n)}(F[n.canvasSharedPtr+8>>2],e,t,r),1):-4;n.offscreenCanvas&&(n=n.offscreenCanvas);var o=!1;if(n.GLctxObject&&n.GLctxObject.GLctx){var a=n.GLctxObject.GLctx.getParameter(2978);o=0===a[0]&&0===a[1]&&a[2]===n.width&&a[3]===n.height}return n.width=t,n.height=r,o&&n.GLctxObject.GLctx.viewport(0,0,t,r),0}function ot(e,t,r){return h?Qe(9,1,e,t,r):nt(e,t,r)}var at={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){at.lastError||(at.lastError=e)},getNewId:function(e){for(var t=at.counter++,r=e.length;r<t;r++)e[r]=null;return t},getSource:function(e,t,r,n){for(var o="",a=0;a<t;++a){var i=n?F[n+4*a>>2]:-1;o+=N(F[r+4*a>>2],i<0?void 0:i)}return o},createContext:function(e,t){var r=e.getContext("webgl",t);return r?at.registerContext(r,t):0},registerContext:function(e,t){var r=Tt(8);F[r+4>>2]=pt();var n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),at.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&at.initExtensions(n),r},makeContextCurrent:function(e){return at.currentContext=at.contexts[e],a.ctx=gt=at.currentContext&&at.currentContext.GLctx,!(e&&!gt)},getContext:function(e){return at.contexts[e]},deleteContext:function(e){at.currentContext===at.contexts[e]&&(at.currentContext=null),"object"==typeof Je&&Je.removeAllHandlersOnTarget(at.contexts[e].GLctx.canvas),at.contexts[e]&&at.contexts[e].GLctx.canvas&&(at.contexts[e].GLctx.canvas.GLctxObject=void 0),St(at.contexts[e].handle),at.contexts[e]=null},initExtensions:function(e){if(e||(e=at.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,r=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},e.drawArraysInstanced=function(e,r,n,o){t.drawArraysInstancedANGLE(e,r,n,o)},e.drawElementsInstanced=function(e,r,n,o,a){t.drawElementsInstancedANGLE(e,r,n,o,a)})}(r),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(r),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,r){t.drawBuffersWEBGL(e,r)})}(r),r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query"),(t=r).multiDrawWebgl=t.getExtension("WEBGL_multi_draw");var n=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","EXT_texture_norm16","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2","WEBKIT_WEBGL_compressed_texture_pvrtc"];(r.getSupportedExtensions()||[]).forEach((function(e){-1!=n.indexOf(e)&&r.getExtension(e)}))}},populateUniformTable:function(e){for(var t=at.programs[e],r=at.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=r.uniforms,o=gt.getProgramParameter(t,35718),a=0;a<o;++a){var i=gt.getActiveUniform(t,a),s=i.name;r.maxUniformLength=Math.max(r.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var c=gt.getUniformLocation(t,s);if(c){var u=at.getNewId(at.uniforms);n[s]=[i.size,u],at.uniforms[u]=c;for(var l=1;l<i.size;++l){var d=s+"["+l+"]";c=gt.getUniformLocation(t,d),u=at.getNewId(at.uniforms),at.uniforms[u]=c}}}}},it=["default","low-power","high-performance"],st={};function ct(){if(!ct.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"};for(var t in st)e[t]=st[t];var r=[];for(var t in e)r.push(t+"="+e[t]);ct.strings=r}return ct.strings}function ut(e){if(h)return Qe(10,1,e);try{var t=Ne.getStreamFromFD(e);return Oe.close(t),0}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),e.errno}}function lt(e,t){if(h)return Qe(11,1,e,t);try{var r=Ne.getStreamFromFD(e),n=r.tty?2:Oe.isDir(r.mode)?3:Oe.isLink(r.mode)?7:4;return S[t>>0]=n,0}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),e.errno}}function dt(e,t,r,n){if(h)return Qe(12,1,e,t,r,n);try{var o=Ne.getStreamFromFD(e),a=Ne.doReadv(o,t,r);return F[n>>2]=a,0}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),e.errno}}function ft(e,t,r,n,o){if(h)return Qe(13,1,e,t,r,n,o);try{var a=Ne.getStreamFromFD(e),i=4294967296*r+(t>>>0);return i<=-9007199254740992||i>=9007199254740992?-61:(Oe.llseek(a,i,n),ie=[a.position>>>0,(ae=a.position,+Math.abs(ae)>=1?ae>0?(0|Math.min(+Math.floor(ae/4294967296),4294967295))>>>0:~~+Math.ceil((ae-+(~~ae>>>0))/4294967296)>>>0:0)],F[o>>2]=ie[0],F[o+4>>2]=ie[1],a.getdents&&0===i&&0===n&&(a.getdents=null),0)}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),e.errno}}function mt(e,t,r,n){if(h)return Qe(14,1,e,t,r,n);try{var o=Ne.getStreamFromFD(e),a=Ne.doWritev(o,t,r);return F[n>>2]=a,0}catch(e){return void 0!==Oe&&e instanceof Oe.ErrnoError||ne(e),e.errno}}function ht(e){if(h)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=ke.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";ke.runningWorkers.push(t);for(var r=Tt(512),n=0;n<128;++n)F[r+4*n>>2]=0;var o=e.stackBase+e.stackSize,a=ke.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,thread:e.pthread_ptr,threadInfoStruct:e.pthread_ptr},i=a.threadInfoStruct>>2;Atomics.store(P,i+0,0),Atomics.store(P,i+1,0),Atomics.store(P,i+2,0),Atomics.store(P,i+17,e.detached),Atomics.store(P,i+26,r),Atomics.store(P,i+12,0),Atomics.store(P,i+10,a.threadInfoStruct),Atomics.store(P,i+11,42),Atomics.store(P,i+27,e.stackSize),Atomics.store(P,i+21,e.stackSize),Atomics.store(P,i+20,o),Atomics.store(P,i+29,o),Atomics.store(P,i+30,e.detached),Atomics.store(P,i+32,e.schedPolicy),Atomics.store(P,i+33,e.schedPrio);var s=At()+40;Atomics.store(P,i+44,s),t.pthread=a;var c={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,selfThreadId:e.pthread_ptr,parentThreadId:e.parent_pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){c.time=performance.now(),t.postMessage(c,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function pt(){return 0|de}function vt(){if(h&&B&&!Atomics.load(P,B+60>>2)&&2==Atomics.load(P,B+0>>2))throw"Canceled!"}function _t(e){if(h)return Qe(15,1,e);switch(e){case 30:return 16384;case 85:return D.length/16384;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:case 79:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return xe(28),-1}a._pthread_self=pt,h||ke.initMainThreadBlock();var gt,wt=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Oe.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(wt.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return Oe.isDir(this.mode)}},isDevice:{get:function(){return Oe.isChrdev(this.mode)}}}),Oe.FSNode=wt,Oe.staticInit(),a.FS_createPath=Oe.createPath,a.FS_createDataFile=Oe.createDataFile,a.FS_createPreloadedFile=Oe.createPreloadedFile,a.FS_createLazyFile=Oe.createLazyFile,a.FS_createDevice=Oe.createDevice,a.FS_unlink=Oe.unlink;var yt=[null,function(e,t){if(h)return Qe(1,1,e,t)},We,He,Ue,ze,Ge,qe,Xe,ot,ut,lt,dt,ft,mt,_t];function Et(e,t,r){var n=r>0?r:U(e)+1,o=new Array(n),a=W(e,o,0,o.length);return t&&(o.length=a),o}h||K.push({func:function(){xt()}});var kt,bt={b:function(e,t,r,n){ne("Assertion failed: "+N(e)+", at: "+[t?N(t):"unknown filename",r,n?N(n):"unknown function"])},n:function(e){return Tt(e+Pe)+Pe},m:function(e,t,r){throw new Re(e).init(t,r),"uncaught_exception"in Be?Be.uncaught_exceptions++:Be.uncaught_exceptions=1,e},t:We,Q:He,S:Ue,O:ze,N:Ge,v:qe,P:Xe,F:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(h)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var r=ke.pthreads[e],n=r&&r.worker;if(!n)return;n.postMessage({cmd:"processThreadQueue"})}return 1},c:function(){ne()},J:function(e,t){var r;if(0===e)r=Date.now();else{if(1!==e&&4!==e)return xe(28),-1;r=Ee()}return F[t>>2]=r/1e3|0,F[t+4>>2]=r%1e3*1e3*1e3|0,0},x:function(e,t){ne("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},T:function(e,t){ne("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},i:function(e,t,r){var n=function(e,t){var r;for($e.length=0,t>>=2;r=D[e++];){var n=r<105;n&&1&t&&t++,$e.push(n?R[t++>>1]:F[t]),++t}return $e}(t,r);return ue[e].apply(null,n)},H:Ve,j:function(e,t){},g:Ke,e:we,f:Ee,h:function(){return 0|me},r:function(){return 0|fe},B:function(e,t,r){D.copyWithin(e,t,t+r)},C:function(e,t,r){Ye.length=t;for(var n=r>>3,o=0;o<t;o++)Ye[o]=R[n+o];return(e<0?ue[-e-1]:yt[e]).apply(null,Ye)},I:function(e){ne("OOM")},D:function(e,t,r){return rt(e)?nt(e,t,r):ot(e,t,r)},q:function(e){},E:function(e,t){return function(e,t){var r={},n=t>>2;r.alpha=!!F[n+0],r.depth=!!F[n+1],r.stencil=!!F[n+2],r.antialias=!!F[n+3],r.premultipliedAlpha=!!F[n+4],r.preserveDrawingBuffer=!!F[n+5];var o=F[n+6];r.powerPreference=it[o],r.failIfMajorPerformanceCaveat=!!F[n+7],r.majorVersion=F[n+8],r.minorVersion=F[n+9],r.enableExtensionsByDefault=F[n+10],r.explicitSwapControl=F[n+11],r.proxyContextToMainThread=F[n+12],r.renderViaOffscreenBackBuffer=F[n+13];var a=rt(e);return a?r.explicitSwapControl?0:at.createContext(a,r):0}(e,t)},L:function(e,t){var r=0;return ct().forEach((function(n,o){var a=t+r;F[e+4*o>>2]=a,function(e,t,r){for(var n=0;n<e.length;++n)S[t++>>0]=e.charCodeAt(n);r||(S[t>>0]=0)}(n,a),r+=n.length+1})),0},M:function(e,t){var r=ct();F[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),F[t>>2]=n,0},w:function(e){Gt(e)},o:ut,K:lt,R:dt,z:ft,u:mt,A:function(){ke.initRuntime()},a:E||a.wasmMemory,G:function(e){var t=ke.threadExitHandlers.pop();e&&t()},s:function(e,t){ke.threadExitHandlers.push((function(){q.get(e)(t)}))},k:function(e,t,r,n){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return x("pthread_create called with a null thread pointer!"),28;var o=[];if(h&&0===o.length)return Ot(687865856,e,t,r,n);var a=0,i=0,s=0,c=0,u=0;if(t)if(a=F[t>>2],a+=81920,i=F[t+8>>2],s=0!==F[t+12>>2],0===F[t+16>>2]){var l=F[t+20>>2],d=F[t+24>>2];!function(e,t,r){if(!t&&!r)return _e;if(!e)return x("pthread_getschedparam called with a null thread pointer!"),pe;if(F[e+12>>2]!==e)return x("pthread_getschedparam attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),pe;var n=Atomics.load(P,e+108+20>>2),o=Atomics.load(P,e+108+24>>2);t&&(F[t>>2]=n),r&&(F[r>>2]=o)}(ke.currentProxiedOperationCallerThread?ke.currentProxiedOperationCallerThread:pt(),t+20,t+24),c=F[t+20>>2],u=F[t+24>>2],F[t+20>>2]=l,F[t+24>>2]=d}else c=F[t+20>>2],u=F[t+24>>2];else a=2097152;var f=0==i;f?i=It(16,a):M((i-=a)>0);for(var m=Tt(232),p=0;p<58;++p)P[(m>>2)+p]=0;F[e>>2]=m,F[m+12>>2]=m;var v=m+156;F[v>>2]=v;var _={stackBase:i,stackSize:a,allocatedOwnStack:f,schedPolicy:c,schedPrio:u,detached:s,startRoutine:r,pthread_ptr:m,parent_pthread_ptr:pt(),arg:n,transferList:o};return h?(_.cmd="spawnThread",postMessage(_,o)):ht(_),0},p:function(e,t){return function(e,t,r){if(!e)return x("pthread_join attempted on a null thread pointer!"),pe;if(h&&I==e)return x("PThread "+e+" is attempting to join to itself!"),ge;if(!h&&ke.mainThreadBlock==e)return x("Main thread "+e+" is attempting to join to itself!"),ge;if(F[e+12>>2]!==e)return x("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),pe;if(Atomics.load(P,e+68>>2))return x("Attempted to join thread "+e+", which was already detached!"),_e;for(r&&Ve();;){var n=Atomics.load(P,e+0>>2);if(1==n){var o=Atomics.load(P,e+4>>2);return t&&(F[t>>2]=o),Atomics.store(P,e+68>>2,1),h?postMessage({cmd:"cleanupThread",thread:e}):ye(e),0}if(!r)return ve;vt(),h||Mt(),Ke(e+0,n,h?100:1)}}(e,t,!0)},d:pt,l:function(e){},y:_t},xt=(function(){var e={a:bt};function t(e,t){var r=e.exports;a.asm=r,q=a.asm.U,k=t,h||re()}function r(e){t(e.instance,e.module)}function n(t){return(w||!c&&!u||"function"!=typeof fetch?Promise.resolve().then(ce):fetch(se,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+se+"'";return e.arrayBuffer()})).catch((function(){return ce()}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),ne(e)}))}if(h||te(),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return x("Module.instantiateWasm callback failed with error: "+e),!1}(w||"function"!=typeof WebAssembly.instantiateStreaming||oe(se)||"function"!=typeof fetch?n(r):fetch(se,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),n(r)}))}))).catch(o)}(),a.___wasm_call_ctors=function(){return(xt=a.___wasm_call_ctors=a.asm.V).apply(null,arguments)}),Tt=(a._run_inference=function(){return(a._run_inference=a.asm.W).apply(null,arguments)},a._main=function(){return(a._main=a.asm.X).apply(null,arguments)},a._malloc=function(){return(Tt=a._malloc=a.asm.Y).apply(null,arguments)}),St=a._free=function(){return(St=a._free=a.asm.Z).apply(null,arguments)},Dt=a.___errno_location=function(){return(Dt=a.___errno_location=a.asm._).apply(null,arguments)},At=(a.___em_js__initPthreadsJS=function(){return(a.___em_js__initPthreadsJS=a.asm.$).apply(null,arguments)},a._emscripten_get_global_libc=function(){return(At=a._emscripten_get_global_libc=a.asm.aa).apply(null,arguments)}),Ft=a._memset=function(){return(Ft=a._memset=a.asm.ba).apply(null,arguments)},Pt=a.stackSave=function(){return(Pt=a.stackSave=a.asm.ca).apply(null,arguments)},Rt=a.stackRestore=function(){return(Rt=a.stackRestore=a.asm.da).apply(null,arguments)},Bt=a.stackAlloc=function(){return(Bt=a.stackAlloc=a.asm.ea).apply(null,arguments)},It=a._memalign=function(){return(It=a._memalign=a.asm.fa).apply(null,arguments)},Ct=(a._emscripten_main_browser_thread_id=function(){return(a._emscripten_main_browser_thread_id=a.asm.ga).apply(null,arguments)},a.___pthread_tsd_run_dtors=function(){return(Ct=a.___pthread_tsd_run_dtors=a.asm.ha).apply(null,arguments)}),Mt=a._emscripten_main_thread_process_queued_calls=function(){return(Mt=a._emscripten_main_thread_process_queued_calls=a.asm.ia).apply(null,arguments)},Lt=(a._emscripten_current_thread_process_queued_calls=function(){return(a._emscripten_current_thread_process_queued_calls=a.asm.ja).apply(null,arguments)},a._emscripten_register_main_browser_thread_id=function(){return(Lt=a._emscripten_register_main_browser_thread_id=a.asm.ka).apply(null,arguments)}),jt=a._do_emscripten_dispatch_to_thread=function(){return(jt=a._do_emscripten_dispatch_to_thread=a.asm.la).apply(null,arguments)},Ot=(a._emscripten_async_run_in_main_thread=function(){return(a._emscripten_async_run_in_main_thread=a.asm.ma).apply(null,arguments)},a._emscripten_sync_run_in_main_thread=function(){return(a._emscripten_sync_run_in_main_thread=a.asm.na).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_0=function(){return(a._emscripten_sync_run_in_main_thread_0=a.asm.oa).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_1=function(){return(a._emscripten_sync_run_in_main_thread_1=a.asm.pa).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_2=function(){return(a._emscripten_sync_run_in_main_thread_2=a.asm.qa).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_xprintf_varargs=function(){return(a._emscripten_sync_run_in_main_thread_xprintf_varargs=a.asm.ra).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_3=function(){return(a._emscripten_sync_run_in_main_thread_3=a.asm.sa).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_4=function(){return(Ot=a._emscripten_sync_run_in_main_thread_4=a.asm.ta).apply(null,arguments)}),Nt=(a._emscripten_sync_run_in_main_thread_5=function(){return(a._emscripten_sync_run_in_main_thread_5=a.asm.ua).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_6=function(){return(a._emscripten_sync_run_in_main_thread_6=a.asm.va).apply(null,arguments)},a._emscripten_sync_run_in_main_thread_7=function(){return(a._emscripten_sync_run_in_main_thread_7=a.asm.wa).apply(null,arguments)},a._emscripten_run_in_main_runtime_thread_js=function(){return(Nt=a._emscripten_run_in_main_runtime_thread_js=a.asm.xa).apply(null,arguments)}),Wt=a.__emscripten_call_on_thread=function(){return(Wt=a.__emscripten_call_on_thread=a.asm.ya).apply(null,arguments)},Ht=(a._emscripten_tls_init=function(){return(a._emscripten_tls_init=a.asm.za).apply(null,arguments)},a.dynCall_jjj=function(){return(a.dynCall_jjj=a.asm.Aa).apply(null,arguments)},a.dynCall_jji=function(){return(a.dynCall_jji=a.asm.Ba).apply(null,arguments)},a.dynCall_iiiijj=function(){return(a.dynCall_iiiijj=a.asm.Ca).apply(null,arguments)},a.dynCall_viijj=function(){return(a.dynCall_viijj=a.asm.Da).apply(null,arguments)},a.dynCall_viiijjjj=function(){return(a.dynCall_viiijjjj=a.asm.Ea).apply(null,arguments)},a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.Fa).apply(null,arguments)},a._main_thread_futex=177680);function Ut(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function zt(e){function t(){kt||(kt=!0,a.calledRun=!0,C||(a.noFSInit||Oe.init.initialized||Oe.init(),Me.init(),le(K),h||(Oe.ignorePermissions=!1,le(Q)),n(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),qt&&function(e){var t=a._main,r=(e=e||[]).length+1,n=Bt(4*(r+1));F[n>>2]=z(f);for(var o=1;o<r;o++)F[(n>>2)+o]=z(e[o-1]);F[(n>>2)+r]=0;try{Gt(t(r,n),!0)}catch(e){if(e instanceof Ut)return;if("unwind"==e)return void(y=!0);var i=e;e&&"object"==typeof e&&e.stack&&(i=[e,e.stack]),x("exception thrown: "+i),m(1,e)}}(e),function(){if(!h){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),$.unshift(e);var e;le($)}}()))}e=e||d,J>0||(function(){if(!h){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),V.unshift(e);var e;le(V)}}(),J>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),t()}),1)):t()))}function Gt(e,t){t&&y&&0===e||(y||(ke.terminateAllThreads(),a.onExit&&a.onExit(e),C=!0),m(e,new Ut(e)))}if(a.cwrap=function(e,t,r,n){var o=(r=r||[]).every((function(e){return"number"===e}));return"string"!==t&&o&&!n?L(e):function(){return j(e,t,r,arguments)}},a.addRunDependency=te,a.removeRunDependency=re,a.FS_createPath=Oe.createPath,a.FS_createDataFile=Oe.createDataFile,a.FS_createPreloadedFile=Oe.createPreloadedFile,a.FS_createLazyFile=Oe.createLazyFile,a.FS_createDevice=Oe.createDevice,a.FS_unlink=Oe.unlink,a.PThread=ke,a.PThread=ke,a._pthread_self=pt,a.wasmMemory=E,a.ExitStatus=Ut,ee=function e(){kt||zt(),kt||(ee=e)},a.run=zt,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();var qt=!0;return a.noInitialRun&&(qt=!1),h||(y=!0),h?ke.initWorker():zt(),e.ready});e.exports=n}).call(this,r(1))},function(e,t,r){"use strict";t.a="// This is our input from js world\nattribute vec2 coords;\n// This is output for the fragment shader\n// varying variables are a little special\n// you will see why later\nvarying highp vec2 vTextureCoord;\n\nvoid main (void) {\n    // Texture and verticies have different coordinate spaces\n    // we do this to invert Y axis\n    vTextureCoord = -coords;\n\n    // Setting vertix position for shape assembler \n    // GLSL has many convenient vector functions\n    // here we extending 2D coords vector to 4D with 2 values\n    // 0.0 is a Z coordinate\n    // 1.1 is a W, special value needed for 3D math\n    // just leave it 1 for now\n    gl_Position = vec4(coords, 0.0, 1.0);\n}"},function(e,t,r){"use strict";t.a="// Setting precision for float calculations\nprecision mediump float;\n// This is input from vertex shader\nvarying highp vec2 vTextureCoord;\n// Samplers are needeed to select textures\n// actually its integers\nuniform sampler2D uSampler;\nuniform sampler2D uAlpha;\n// This will tell us how much to screw the image\nuniform float iter;\n\nvec2 coords;\nfloat alpha;\nvoid main(void){\n\n    // Transforming coordinates from GL space to texture space\n    // All math can be done directly to vectors\n    coords = vTextureCoord / 2.0 + 0.5;\n    alpha = texture2D(uAlpha, coords).a;\n\n    // Fragment shader must set this variable\n    gl_FragColor = texture2D(uSampler, coords) * alpha + (1.0 - alpha) * vec4(0.5, 0.5, 0.5, 1.0);\n    //gl_FragColor.a = alpha;\n}"},function(e,t,r){"use strict";r.r(t),function(e){var t=r(2),n=r(3),o=r(4),a=r.n(o),i=r(5),s=r(6);const c=a()(),u={canvas:{video:document.getElementById("video"),hidden:document.createElement("canvas"),visible:document.getElementById("canvas"),capture:document.getElementById("capture"),template:document.getElementById("template"),ctx:{}},audio:{shutter:document.getElementById("shutter")},downloadBtn:document.getElementById("btn-download"),loading:document.getElementById("loading"),fps:document.getElementById("fps"),options:[document.getElementById("mirror_x_on"),document.getElementById("mirror_y_on"),document.getElementById("grayscale_on"),document.getElementById("outline_on"),document.getElementById("sharpen_on"),document.getElementById("invert_on"),document.getElementById("blur_on"),document.getElementById("emboss_on")]};u.canvas.hidden.width=192,u.canvas.hidden.height=192,u.canvas.ctx.hidden=u.canvas.hidden.getContext("2d");const l=document.getElementsByClassName("video")[0],d=u.canvas.visible.getContext("webgl");function f(e){const t=e.createTexture(),r=e.RGBA,n=e.RGBA,o=e.UNSIGNED_BYTE,a=new Uint8Array([0,0,255,255]);return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,r,1,1,0,n,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t}function m(e,t,r){const n=e.RGBA,o=e.RGBA,a=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n,o,a,r)}console.log(d),u.canvas.ctx.capture=u.canvas.capture.getContext("2d"),u.canvas.ctx.capture.drawImage(u.canvas.template,0,0);const h=function(e){let t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,i.a),e.compileShader(t),console.log(e.getShaderInfoLog(t));let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,s.a),e.compileShader(r),console.log(e.getShaderInfoLog(r));let n=e.createProgram();return e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.useProgram(n),n}(d),p=(function(e,t){let r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1,1,-1,-1,1]),e.STATIC_DRAW);let n=e.getAttribLocation(t,"coords");e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)}(d,h),f(d)),v=f(d),_=d.getUniformLocation(h,"iter"),g=d.getUniformLocation(h,"uSampler"),w=d.getUniformLocation(h,"uAlpha");d.uniform1i(g,0),d.uniform1i(w,1),u.canvas.video.addEventListener("loadedmetadata",(function(e){console.log(this),l.style.width=this.videoWidth+"px",l.style.height=this.videoHeight+"px",u.canvas.visible.width=this.videoWidth,u.canvas.visible.height=this.videoHeight,d.viewport(0,0,this.videoWidth,this.videoHeight)}),!1);const y=window.location.search,E=new URLSearchParams(y),k=E.get("width"),b=E.get("height");u.downloadBtn.addEventListener("click",(function(t){let r=3;u.loading.innerText="";const n=()=>{if(0===r)return sounds.shutter(),void e(()=>{u.downloadBtn.innerText="CAPTURE",u.canvas.visible.classList.add("flash"),u.canvas.ctx.capture.drawImage(u.canvas.visible,25,25);var e=u.canvas.capture.toDataURL("image/png");const t=document.createElement("a");t.href=e,t.download="wasmbooth.png",setTimeout(()=>u.canvas.visible.classList.remove("flash"),1e3);var r=new MouseEvent("click");t.dispatchEvent(r)});sounds.beep(),u.downloadBtn.innerText="... "+r.toString()+" ...",setTimeout(()=>{r--,n()},1e3)};n(),t.preventDefault()}));navigator.mediaDevices.getUserMedia({video:{width:k,height:b},audio:!1}).then((function(e){u.canvas.video.srcObject=e})).catch((function(e){throw e})),window.sounds=(()=>{var e=window.AudioContext||window.webkitAudioContext||!1;if(e){var t=new e;return{beep:(()=>{const e=t.createOscillator(),r=t.createGain();return r.gain.value=0,e.type="sine",e.connect(r),e.frequency.value=830.6,r.connect(t.destination),e.start(0),()=>{r.gain.value=.1,setTimeout(()=>r.gain.value=0,150)}})(),shutter:()=>{u.audio.shutter.play()}}}return{beep:()=>{},shutter:()=>{}}})(),c.then(e=>{const r=e._malloc(147456),o=e.cwrap("run_inference","void",["number","number"]),a=new t.a(250,u.fps),i=()=>{a.tick(),u.canvas.ctx.hidden.drawImage(u.canvas.video,0,0,u.canvas.video.videoWidth,u.canvas.video.videoHeight,0,0,192,192);const t=u.canvas.ctx.hidden.getImageData(0,0,192,192);n.a(t.data.buffer,e.HEAPU8.buffer,r),o(r,147456);const s=new Uint8ClampedArray(e.HEAPU8.buffer,r,147456),c=new ImageData(new Uint8ClampedArray(s),192,192);d.activeTexture(d.TEXTURE0),m(d,p,u.canvas.video),d.activeTexture(d.TEXTURE1),m(d,v,c),d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT),d.uniform1f(_,0),d.drawArrays(d.TRIANGLES,0,6),requestAnimationFrame(i)};i()})}.call(this,r(8).setImmediate)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(9),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(0))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,a,i,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,n=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(h,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(i+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return u[c]=o,n(c),c++},f.clearImmediate=m}function m(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{m(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(0),r(1))}]);