!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e,t){this.lastTick=performance.now(),this.lastNotify=this.lastTick,this.interval=e,this.element=t,this.runningSum=0,this.runningSamples=0}tick(){const e=performance.now();this.runningSum+=e-this.lastTick,this.runningSamples++,this.lastTick=e,e-this.lastNotify>this.interval&&this.notify(e)}notify(e){const t=1e3/(this.runningSum/this.runningSamples);this.element.innerText=t.toFixed(2)+"fps",this.lastNotify=e,this.runningSamples=0,this.runningSum=0}}},function(e,t,n){"use strict";t.a=function(){return new Worker(n.p+"bundle.worker.js")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r{constructor(e){function t(e,t){const n=e.gl,r=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(r,t),n.compileShader(r),console.log(n.getShaderInfoLog(r));const i=n.createProgram();n.attachShader(i,e.vertSh),n.attachShader(i,r),n.linkProgram(i),e.fragShaders.push(r),e.progs.push(i)}function n(e){const t=e.gl,n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);{const e=0,r=t.RGBA,i=0,o=t.RGBA,a=t.UNSIGNED_BYTE,s=null;t.texImage2D(t.TEXTURE_2D,e,r,192,192,i,o,a,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n.textureWidth=192,n.textureHeight=192}if(!e.frameBuffer){const n=t.createFramebuffer();e.frameBuffer=n}return e.textures.push(n),n}this.gl=e,this.isUsingBilateral=!1,function(e){const n=e.gl;let r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,"// This is our input from js world\nattribute vec2 coords;\n// This is output for the fragment shader\n// varying variables are a little special\n// you will see why later\nvarying highp vec2 vTextureCoord;\n\nvoid main (void) {\n    // Texture and verticies have different coordinate spaces\n    // we do this to invert Y axis\n    vTextureCoord = -coords;\n\n    // Setting vertix position for shape assembler \n    // GLSL has many convenient vector functions\n    // here we extending 2D coords vector to 4D with 2 values\n    // 0.0 is a Z coordinate\n    // 1.1 is a W, special value needed for 3D math\n    // just leave it 1 for now\n    gl_Position = vec4(coords, 0.0, 1.0);\n}"),n.compileShader(r),console.log(n.getShaderInfoLog(r)),e.vertSh=r,e.fragShaders=[],e.progs=[],t(e,"// Setting precision for float calculations\nprecision mediump float;\n// This is input from vertex shader\nvarying highp vec2 vTextureCoord;\n// Samplers are needeed to select textures\n// actually its integers\nuniform sampler2D uSampler;\nuniform sampler2D uAlpha;\nuniform sampler2D uBackground;\n\nvec2 coords;\nvec4 background;\nfloat alpha;\nvoid main(void){\n\n    // Transforming coordinates from GL space to texture space\n    // All math can be done directly to vectors\n    coords = vTextureCoord / 2.0 + 0.5;\n    coords.x = 1.0 - coords.x;\n\n    alpha = texture2D(uAlpha, coords).a;\n    //transform alpha value 0.5 - 1.0 --\x3e 0.0 --\x3e 1.0  \n    //alpha = clamp(alpha * 2.0 - 1.0, 0.0, 1.0);\n\n    background = texture2D(uBackground, coords);\n    background.a = 1.0;\n\n    // Fragment shader must set this variable\n    gl_FragColor = texture2D(uSampler, coords) * alpha + (1.0 - alpha) * background;\n}"),t(e,"// Setting precision for float calculations\nprecision mediump float;\n\n// This is input from vertex shader\nvarying highp vec2 vTextureCoord;\n\n// Samplers are needeed to select textures\n// actually its integers\nuniform sampler2D uSampler;\nuniform sampler2D uAlpha;\nuniform vec2 vDIR;\n\nconst float PI = 3.1415926535897932384626433832795;\nconst int blur_size = 3;\nconst float blur_width = 1.;\n\nfloat gauss(float x, float e)\n{\n    return 1.0/(pow(2.0*PI*e*e, 0.5)) * exp(-(x*x)/(2.0*e*e)); \n}\n\nvoid main(void) {\n\n    // Transforming coordinates from GL space to texture space\n    // All math can be done directly to vectors\n    vec2 coords = vTextureCoord / 2.0 + 0.5;\n    coords = 1.0 - coords;\n\t\n\tvec4 pixval = vec4(0.);\n\tfloat tot = 0.;\n\n\tconst int nb = 2*blur_size+1;\n\n\tfor (int x=0; x<nb; x++)\n\t{ \n\t   float x2 = blur_width*float(x-blur_size);\n\t   vec2 ipos = coords + vDIR * (x2 / 192.0);\n\t   float g = gauss(x2, float(blur_size) * blur_width);\n\t   pixval+= g*texture2D(uAlpha, ipos);\n\t   tot+= g;\n\t}\n\tgl_FragColor = pixval/tot;\n}\n"),t(e,"// Setting precision for float calculations\nprecision mediump float;\n\n// This is input from vertex shader\nvarying highp vec2 vTextureCoord;\n\n// Samplers are needeed to select textures\n// actually its integers\nuniform sampler2D uSampler;\nuniform sampler2D uAlpha;\n\nvec2 coords;\nvec4 background;\nvoid main(void) {\n\n    // Transforming coordinates from GL space to texture space\n    // All math can be done directly to vectors\n    coords = vTextureCoord / 2.0 + 0.5;\n    coords = 1.0 - coords;\n\n\tbackground = texture2D(uAlpha, coords);\n\t\n    const float PI = 6.28318530718; // Pi*2\n    \n    // GAUSSIAN BLUR SETTINGS {{{\n    const float DIR = 4.0; // BLUR DIRECTIONS (Default 16.0 - More is better but slower)\n    const float QLT = 2.0; // BLUR QUALITY (Default 3.0 - More is better but slower)\n    const float SIZE = 2.0; // BLUR SIZE (Radius Default 8.0)\n    // GAUSSIAN BLUR SETTINGS }}}\n   \n    const vec2 RAD = SIZE/vec2(192.0, 192.0);\n    \n    // Blur calculations\n    for( float d=0.0; d<PI; d+=PI/DIR)\n    {\n\t\tfor(float i=1.0/QLT; i<=1.0; i+=1.0/QLT)\n        {\n\t\t\tbackground += texture2D( uAlpha, coords+vec2(cos(d),sin(d))*RAD*i);\t\t\n        }\n    }\n    \n    // Output to screen\n    background /= QLT * DIR;\n\n\t// Fragment shader must set this variable\n\tgl_FragColor = background;\n}\n"),t(e,"// Setting precision for float calculations\nprecision mediump float;\n\n// This is input from vertex shader\nvarying highp vec2 vTextureCoord;\n\n// Samplers are needeed to select textures\n// actually its integers\nuniform sampler2D uSampler;\nuniform sampler2D uAlpha;\n\n#define SIGMA 2.0\n#define BSIGMA 1.0\n#define MSIZE 3\n\nfloat normpdf(in float x, in float sigma)\n{\n    return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\n}\n\nfloat normpdf3(in vec3 v, in float sigma)\n{\n    return 0.39894*exp(-0.5*dot(v,v)/(sigma*sigma))/sigma;\n}\n\nfloat normpdf4(in vec4 v, in float sigma)\n{\n    return 0.39894*exp(-0.5*dot(v,v)/(sigma*sigma))/sigma;\n}\n\nvoid main(void) {\n\n    // Transforming coordinates from GL space to texture space\n    // All math can be done directly to vectors\n    vec2 fragCoord = vTextureCoord / 2.0 + 0.5;\n    fragCoord = 1.0 - fragCoord;\n    const vec2 iResolution = vec2(192.0, 192.0);\n\n    vec4 c = texture2D(uAlpha, fragCoord.xy);\n\n    //declare stuff\n    const int kSize = (MSIZE-1)/2;\n    float kernel[MSIZE];\n    vec4 final_colour = vec4(0.0);\n    \n    //create the 1-D kernel\n    float Z = 0.0;\n    for (int j = 0; j <= kSize; ++j)\n    {\n        kernel[kSize+j] = kernel[kSize-j] = normpdf(float(j), SIGMA);\n    }\n    \n    \n    vec4 cc;\n    float factor;\n    float bZ = 1.0/normpdf(0.0, BSIGMA);\n    //read out the texels\n    for (int i=-kSize; i <= kSize; ++i)\n    {\n        for (int j=-kSize; j <= kSize; ++j)\n        {\n            cc = texture2D(uAlpha, fragCoord.xy + vec2(float(i),float(j)) / iResolution.xy);\n            //factor = normpdf4(cc-c, BSIGMA)*bZ*kernel[kSize+j]*kernel[kSize+i];\n            factor = normpdf3(cc.rgb-c.rgb, BSIGMA)*bZ*kernel[kSize+j]*kernel[kSize+i];\n            //factor = normpdf(cc.a-c.a, BSIGMA)*bZ*kernel[kSize+j]*kernel[kSize+i];\n            Z += factor;\n            final_colour += factor*cc;\n\n        }\n    }\n    \n    gl_FragColor = final_colour/Z;\t\n}\n")}(this),function(e){const t=e.gl;let n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1,1,-1,-1,1]),t.STATIC_DRAW);let r=t.getAttribLocation(e.progs[0],"coords");t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r),e.vertexBuffer=n}(this),this.switchShader(0),this.textures=[],this.blurRenderTexture=n(this),this.maskRenderTexture=n(this)}destroy(){const e=this.gl;e.deleteShader(this.vertSh),this.fragShaders.forEach(t=>e.deleteShader(t)),this.progs.forEach(t=>e.deletePrograms(t)),e.deleteBuffer(this.vertexBuffer),this.textures.forEach(t=>e.deleteTexture(t)),e.deleteFrameBuffer(this.frameBuffer)}initTexture(){const e=this.gl,t=e.createTexture(),n=e.RGBA,r=e.RGBA,i=e.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);return e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,r,i,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),this.textures.push(t),this.textures.length-1}updateTexture(e,t,n){const r=this.gl,i=this.textures[e];r.activeTexture(r.TEXTURE0+t);const o=r.RGBA,a=r.RGBA,s=r.UNSIGNED_BYTE;r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,o,a,s,n),i.textureWidth=n.width||n.videoWidth,i.textureHeight=n.height||n.videoHeight}useBilateral(e){this.isUsingBilateral=e}switchShader(e){const t=this.gl,n=this.progs[e];t.useProgram(n);const r=t.getUniformLocation(n,"uSampler"),i=t.getUniformLocation(n,"uAlpha"),o=t.getUniformLocation(n,"uBackground");t.uniform1i(r,0),t.uniform1i(i,1),t.uniform1i(o,2)}filterMask(e){const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);const n=t.COLOR_ATTACHMENT0;t.framebufferTexture2D(t.FRAMEBUFFER,n,t.TEXTURE_2D,this.maskRenderTexture,0);const r=t.getParameter(t.VIEWPORT);t.viewport(0,0,this.maskRenderTexture.textureWidth,this.maskRenderTexture.textureHeight),this.switchShader(this.isUsingBilateral?3:2),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.textures[e]),this.render(),this.switchShader(0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.maskRenderTexture),t.viewport(0,0,r[2],r[3])}blurBackground(e){const t=this.gl,n=this.textures[e];t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);const r=t.COLOR_ATTACHMENT0;t.framebufferTexture2D(t.FRAMEBUFFER,r,t.TEXTURE_2D,this.blurRenderTexture,0);const i=t.getParameter(t.VIEWPORT);t.viewport(0,0,this.blurRenderTexture.textureWidth,this.blurRenderTexture.textureHeight),this.switchShader(1);const o=t.getUniformLocation(this.progs[1],"vDIR");t.uniform2f(o,1,0),t.activeTexture(t.TEXTURE1);const a=t.getParameter(t.TEXTURE_BINDING_2D);t.bindTexture(t.TEXTURE_2D,n),this.render(),t.framebufferTexture2D(t.FRAMEBUFFER,r,t.TEXTURE_2D,n,0),t.uniform2f(o,0,1),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.blurRenderTexture),t.viewport(0,0,n.textureWidth,n.textureHeight),this.render(),this.switchShader(0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,a),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,this.textures[e]),t.viewport(0,0,i[2],i[3])}render(){const e=this.gl;e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,6)}}},function(e,t,n){"use strict";n.r(t),function(e){var t=n(1),r=(n(8),n(3)),i=n(2);const o={canvas:{video:document.getElementById("video"),hidden:document.createElement("canvas"),visible:document.getElementById("canvas"),capture:document.getElementById("capture"),template:document.getElementById("template"),ctx:{}},audio:{shutter:document.getElementById("shutter")},downloadBtn:document.getElementById("btn-download"),loading:document.getElementById("loading"),fps:document.getElementById("fps")},a=window.location.search,s=new URLSearchParams(a),c=Number(s.get("width")),u=Number(s.get("height"));let l=192,d=192;o.canvas.hidden.width=l,o.canvas.hidden.height=d,o.canvas.ctx.hidden=o.canvas.hidden.getContext("2d");const f=o.canvas.visible.getContext("webgl");console.log(f),o.canvas.ctx.capture=o.canvas.capture.getContext("2d"),o.canvas.ctx.capture.drawImage(o.canvas.template,0,0);const h=new r.a(f),m=h.initTexture(),v=h.initTexture(),g=h.initTexture();o.canvas.video.addEventListener("loadedmetadata",(function(e){const t=document.getElementsByClassName("video")[0];t.style.width=1*this.videoWidth+"px",t.style.height=1*this.videoHeight+"px",o.canvas.visible.width=1*this.videoWidth,o.canvas.visible.height=1*this.videoHeight,h.gl.viewport(0,0,1*this.videoWidth,1*this.videoHeight)}),!1);const p=document.getElementById("custom_bkg");p.addEventListener("change",(function(){const e=this.value;if("black"==e)h.updateTexture(g,2,new ImageData(new Uint8ClampedArray([0,0,0,255]),1,1));else if("blur"==e);else{const t=new Image;t.onload=function(){h.updateTexture(g,2,t)},t.src=e}}),!1),p.dispatchEvent(new Event("change")),o.downloadBtn.addEventListener("click",(function(t){let n=3;o.loading.innerText="";const r=()=>{if(0===n)return sounds.shutter(),void e(()=>{o.downloadBtn.innerText="CAPTURE",o.canvas.visible.classList.add("flash"),o.canvas.ctx.capture.drawImage(o.canvas.visible,25,25);var e=o.canvas.capture.toDataURL("image/png");const t=document.createElement("a");t.href=e,t.download="wasmbooth.png",setTimeout(()=>o.canvas.visible.classList.remove("flash"),1e3);var n=new MouseEvent("click");t.dispatchEvent(n)});sounds.beep(),o.downloadBtn.innerText="... "+n.toString()+" ...",setTimeout(()=>{n--,r()},1e3)};r(),t.preventDefault()})),navigator.mediaDevices.getUserMedia({video:{width:c,height:u},audio:!1}).then((function(e){o.canvas.video.srcObject=e})).catch((function(e){throw e})),window.sounds=(()=>{var e=window.AudioContext||window.webkitAudioContext||!1;if(e){var t=new e;return{beep:(()=>{const e=t.createOscillator(),n=t.createGain();return n.gain.value=0,e.type="sine",e.connect(n),e.frequency.value=830.6,n.connect(t.destination),e.start(0),()=>{n.gain.value=.1,setTimeout(()=>n.gain.value=0,150)}})(),shutter:()=>{o.audio.shutter.play()}}}return{beep:()=>{},shutter:()=>{}}})();const T=()=>{"blur"==p.value&&h.blurBackground(v),h.filterMask(v),h.render(),R()},E=new i.a;E.postMessage({eventType:"INITIALISE"}),E.addEventListener("message",(function(e){const{eventType:t,eventData:n,eventId:r}=e.data;if("INFERENCE_RESULT"===t){const e=new ImageData(new Uint8ClampedArray(n[0]),n[1],n[2]);h.updateTexture(v,1,e),x?T():requestAnimationFrame(T)}else"ERROR"===t&&console.error(e)})),E.addEventListener("error",(function(e){console.error(e)})),document.getElementById("lite_model_on").addEventListener("change",(function(){l=this.checked?128:192,d=this.checked?128:192})),document.getElementById("bilateral_on").addEventListener("change",(function(){console.log("bilateral_on("+this.checked+")"),h.useBilateral(this.checked)}));let x=!1;document.getElementById("fullspeed_on").addEventListener("change",(function(){console.log("fullspeed_on("+this.checked+")"),x=this.checked}));const b=new t.a(1e3,o.fps),R=()=>{b.tick(),h.updateTexture(m,0,o.canvas.video),o.canvas.ctx.hidden.drawImage(o.canvas.video,0,0,o.canvas.video.videoWidth,o.canvas.video.videoHeight,0,0,l,d),window.OffscreenCanvas;{const e=o.canvas.ctx.hidden.getImageData(0,0,l,d);E.postMessage({eventType:"CALL",eventData:{method:"RUN_INFERENCE",arguments:[e.data.buffer,l,d]}},[e.data.buffer])}};R()}.call(this,n(5).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(6),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){m(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(m,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&m(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=h}function h(e){delete u[e]}function m(e){if(l)setTimeout(m,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(7))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict"}]);